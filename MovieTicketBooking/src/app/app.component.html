<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Ticket Booking</title>  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-12 border border-3 border-dark bg-danger shadow-lg" id="heading">Movie Ticket Booking</div>
    </div>
    <div class="row">
      <div class="col-6 border border-dark bg-white shadow-lg">
        <h2>Please enter your details </h2>
        <hr>
        <form #myForm="ngForm">
          <div class="form-group">
            <label for="nameField">Name</label>
            <input type="text" id="nameField" placeholder="Enter Your Name" class="form-control" name="nameField" #nameField="ngModel" ngModel required pattern="[A-Za-z]+">
          </div>
          <div *ngIf="nameField.touched">
            <div *ngIf="nameField.errors?.['required']">
              <b style="color: red;">Name Required.</b>
            </div>
            <div *ngIf="nameField.errors?.['pattern']">
              <font color="red"><b>Invalid Name</b></font>
            </div>
          </div>

          <div class="form-group">
            <label for="idField">ID</label>
            <input 
              type="text" 
              id="idField" 
              name="idField" 
              class="form-control" 
              placeholder="Enter your ID" 
              #idField="ngModel" 
              ngModel 
              required 
              pattern="[0-9A-Za-z]+">
          </div>
          <div *ngIf="idField.touched">
            <div *ngIf="idField.errors?.['required']">
              <b style="color: red;">ID Required.</b>
            </div>
            <div *ngIf="idField.errors?.['pattern']">
              <font color="red"><b>Invalid ID</b></font>
            </div>
          </div>

          <div class="form-group">
            <label for="dateField">Date</label>
            <input type="date" 
            id="dateField" 
            class="form-control" 
            name="dateField" ngModel 
            #dateField="ngModel" 
            required>
          </div>
          <div *ngIf="dateField.touched && dateField.invalid">
            <div *ngIf="dateField.errors?.['required']">
              <b style="color: red;">Date is required.</b>
            </div>
          </div>
          

          <div class="form-group">
            <label for="showTime">Show Time</label>
            <select id="showtime" 
            class="form-control" 
            name="showtimeField" ngModel 
            #showtimeField="ngModel" required>
              <option value="" disabled selected>Select a show time</option>
              <option>10.30 AM</option>
              <option>2.30 PM</option>
              <option>5.30 PM</option>
              <option>9.30 PM</option>
              <option>1.00 AM</option>
            </select>
          </div>
          <div *ngIf="showtimeField.touched && showtimeField.invalid">
            <div *ngIf="showtimeField.errors?.['required']">
              <b style="color: red;">Show time is required.</b>
            </div>
          </div>
          

          <div class="form-group">
            <label for="movie">Movie</label>
            <input
              type="text"
              id="movie"
              class="form-control"
              name="movieField"
              placeholder="Enter the movie name"
              ngModel
              #movieField="ngModel"
              required/>
          </div>
          <div *ngIf="movieField.touched && movieField.invalid">
            <div *ngIf="movieField.errors?.['required']">
              <b style="color: red;">Movie name is required.</b>
            </div>
          </div>
          

          <div class="form-group">
            <label for="tickets">Number of Tickets</label>
            <input
              type="number"
              id="tickets"
              class="form-control"
              name="ticketsField"
              placeholder="Enter the number of tickets"
              ngModel
              #ticketsField="ngModel"
              required
              min="1"/>
          </div>
          <div *ngIf="ticketsField.touched && ticketsField.invalid">
            <div *ngIf="ticketsField.errors?.['required']">
              <b style="color: red;">Number of tickets is required.</b>
            </div>
            <div *ngIf="ticketsField.errors?.['min']">
              <b style="color: red;">Number of tickets must be at least 1.</b>
            </div>
          </div>

          <div class="form-group">
            <label for="seatType">Seat Type</label>
            <select
              id="seattype"
              class="form-control"
              name="seattypeField"
              ngModel
              #seattypeField="ngModel"
              required >
              <option value="">Select Seat Type</option>
              <option value="Gold">Gold</option>
              <option value="Silver">Silver</option>
              <option value="Platinum">Platinum</option>
              <option value="Diamond">Diamond</option>
            </select>
          </div>
          <div *ngIf="seattypeField.touched && seattypeField.invalid">
            <div *ngIf="seattypeField.errors?.['required']">
              <b style="color: red;">Seat Type is required.</b>
            </div>
          </div>
          

          <!-- <div class="form-group">
            <label>Payment Method</label>
            <div>
              <input
                type="radio"
                id="upi"
                name="paymentMethodField"
                value="UPI"
                ngModel
                #paymentMethodField="ngModel"
                required
              />
              <label for="upi">UPI</label>
              
              <input
                type="radio"
                id="card"
                name="paymentMethodField"
                value="Card"
                ngModel
                #paymentMethodField="ngModel"
                required
              />
              <label for="card">Card</label>
            </div>
            
          </div>
          <div *ngIf="paymentMethodField.touched && paymentMethodField.invalid">
            <div *ngIf="paymentMethodField.errors?.['required']">
              <b style="color: red;">Payment method is required.</b>
            </div>
          </div> -->
          
          <hr>

          <button class="btn btn-success" (click)="insertBooking(myForm.value)">Save</button>
          <button class="btn btn-primary" (click)="updateBooking(myForm.value)">Update</button>
          <button class="btn btn-danger" (click)="deleteBooking(myForm.value)">Delete</button>
          <button class="btn btn-info" (click)="findAllBooking()">Find All</button>
          <button class="btn btn-warning" (click)="findBooking(myForm.value)">Find</button>

        </form>
      </div>
      
      <div class="col border border-dark bg-white shadow-lg" style="width:100%;">
        <br>
        <h2>Booking Details</h2>
        <h2 style="font-weight: bold; color: green; text-align: center;">{{result}}</h2>
        <div *ngIf="bookingArr && bookingArr.length > 0" style="width: 30%;">
          <table class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>ID</th>
                <th>Movie</th>
                <th>Tickets</th>
                <th>Seat Type</th>
                <th>Payment</th>
                <th>Date</th>
                <th>Show Time</th>
              </tr>
            </thead>
            <tbody>
              
              <tr *ngFor="let booking of bookingArr">
                <td>{{ booking.id }}</td>
                <td>{{ booking.nameField }}</td>
                <td>{{ booking.movieField }}</td>
                <td>{{ booking.ticketsField }}</td>
                <td>{{ booking.seattypeField }}</td>
                <td>{{ booking.paymentMethodField }}</td>
                <td>{{ booking.dateField }}</td>
                <td>{{ booking.showtimeField }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
